var teamApi=function(){function i(a){e[a]=-1!=d[a].url.indexOf("{id}")&&-1!=d[a].url.indexOf("{alt_id}")?function(b){b&&b.id&&b.alt_id?(b.url=d[a].url.replace("{id}",b.id).replace("{alt_id}",b.alt_id),b.type=d[a].type,g(b)):b&&!b.id?c.error("MODULE ti.teamwork: Missing required parameter 'alt_id' for "+a):b&&!b.alt_id?c.error("MODULE ti.teamwork: Missing required parameter 'id' for "+a):c.error("MODULE ti.teamwork: Missing parameters for "+a)}:-1!=d[a].url.indexOf("{id}")?function(b){b&&b.id?(b.url=
d[a].url.replace("{id}",b.id),b.type=d[a].type,g(b)):b&&!b.id?c.error("MODULE ti.teamwork: Missing required parameter 'id' for "+a):c.error("MODULE ti.teamwork: Missing parameters for "+a)}:function(b){b.url=d[a].url;b.type=d[a].type;g(b)}}var h=".json",f="debug",e={},d={getAccount:{url:"account",type:"GET"},authenticate:{url:"authenticate",type:"GET"},getLatestActivity:{url:"latestActivity",type:"GET"},getLatestProjectActivity:{url:"projects/{id}/latestActivity",type:"GET"},createMessageCategory:{url:"projects/{id}/messageCategories",
type:"POST"},getMessageCategory:{url:"messageCategories/{id}",type:"GET"},getProjectMessageCategories:{url:"projects/{id}/messageCategories",type:"GET"},updateMessageCategory:{url:"messageCategories/{id}",type:"PUT"},deleteMessageCategory:{url:"messageCategories/{id}",type:"DELETE"},createFileCategory:{url:"projects/{id}/fileCategories",type:"POST"},getFileCategory:{url:"fileCategories/{id}",type:"GET"},getProjectFileCategories:{url:"projects/{id}/fileCategories",type:"GET"},updateFileCategory:{url:"fileCategories/{id}",
type:"PUT"},deleteFileCategory:{url:"fileCategories/{id}",type:"DELETE"},createNotebookCategory:{url:"projects/{id}/notebookCategories",type:"POST"},getNotebookCategory:{url:"notebookCategories/{id}",type:"GET"},getProjectNotebookCategories:{url:"projects/{id}/notebookCategories",type:"GET"},updateNotebookCategory:{url:"notebookCategories/{id}",type:"PUT"},deleteNotebookCategory:{url:"notebookCategories/{id}",type:"DELETE"},createLinkCategory:{url:"projects/{id}/linkCategories",type:"POST"},getLinkCategory:{url:"linkCategories/{id}",
type:"GET"},getProjectLinkCategories:{url:"projects/{id}/linkCategories",type:"GET"},updateLinkCategory:{url:"linkCategories/{id}",type:"PUT"},deleteLinkCategory:{url:"linkCategories/{id}",type:"DELETE"},createProjectCategory:{url:"projectcategories",type:"POST"},getProjectCategory:{url:"projectCategories/{id}",type:"GET"},getAllProjectCategories:{url:"projectCategories",type:"GET"},updateProjectCategory:{url:"projectCategories/{id}",type:"PUT"},deleteProjectCategory:{url:"projectCategories/{id}",
type:"DELETE"},getCategories:{url:"projects/{id}/messageCategories",type:"POST"},getRecentComments:{url:"{id}/{alt_id}/comments",type:"PUT"},getComment:{url:"comments/{id}",type:"DELETE"},createComment:{url:"/{id}/{alt_id}/comments",type:"GET"},updateComment:{url:"comments/{id}//PUT",type:"GET"},deleteComment:{url:"comments/{id}//DELETE",type:"GET"},createCompany:{url:"companies",type:"GET"},updateCompany:{url:"companies/{id}//PUT",type:"GET"},deleteCompany:{url:"companies/{id}//DELETE",type:"GET"},
getCompany:{url:"companies/{id}",type:"GET"},getAllCompanies:{url:"companies",type:"GET"},getProjectCompanies:{url:"projects/{id}/companies",type:"GET"},getAllFiles:{url:"projects/{id}/files",type:"GET"},getFile:{url:"files/{id}",type:"GET"},addFile:{url:"projects/{id}/files",type:"POST"},deleteFiles:{url:"files/{id}",type:"DELTE"},uploadFile:{url:"pendingfiles",type:"POST"},createMessage:{url:"projects/{id}/post",type:"POST"},getMessage:{url:"posts/{id}",type:"GET"},getLatestMessages:{url:"projects/{id}/posts",
type:"GET"},getAllCategoryMessages:{url:"projects/{id}/cat/{alt_id}/posts",type:"GET"},updateMessage:{url:"posts/{id}",type:"PUT"},getArchivedMessages:{url:"projects/{id}/posts/archive",type:"GET"},getArchivedCategoryMessages:{url:"projects/{id}/cat/{alt_id}/posts/archive",type:"GET"},archiveMessage:{url:"messages/{id}/archive",type:"GET"},unarchiveMessage:{url:"messages/{id}/unarchive",type:"GET"},deleteMessage:{url:"posts/{id}",type:"DELETE"},createMessageReply:{url:"messages/{id}/messageReplies",
type:"POST"},getMessageReply:{url:"messageReplies/{id}",type:"GET"},getMessageReplies:{url:"messages/{id}/replies",type:"GET"},updateMessageReply:{url:"messageReplies/{id}",type:"PUT"},deleteMessageReply:{url:"messageReplies/{id}",type:"DELETE"},getAllMilestones:{url:"milestones",type:"GET"},getProjectMilestones:{url:"projects/{id}/milestones",type:"GET"},getMilestone:{url:"milestones/{id}",type:"GET"},markMilestoneComplete:{url:"milestones/{id}/complete",type:"PUT"},markMilestoneUncomplete:{url:"milestones/{id}/uncomplete",
type:"PUT"},createMilestone:{url:"projects/{id}/milestones",type:"POST"},updateMilestone:{url:"milestones/{id}",type:"PUT"},deleteMilestone:{url:"milestones/{id}",type:"DELETE"},getAllNotebooks:{url:"notebooks",type:"GET"},getProjectNotebooks:{url:"projects/{id}/notebooks",type:"GET"},getNotebook:{url:"notebooks/{id}",type:"GET"},createNotebook:{url:"projects/{id}/notebooks",type:"POST"},updateNotebook:{url:"notebooks/{id}",type:"PUT"},lockNotebook:{url:"notebooks/{id}/lock",type:"PUT"},unloackNotebook:{url:"notebooks/{id}/unlock",
type:"PUT"},deleteNotebook:{url:"notebooks/{id}",type:"DELETE"},addUser:{url:"people",type:"POST"},editUser:{url:"people/{id}",type:"PUT"},deleteUser:{url:"people/{id}",type:"DELETE"},getMe:{url:"me",type:"GET"},getPeople:{url:"people",type:"GET"},getAllPeople:{url:"projects/{id}/people",type:"GET"},getPersonPermissions:{url:"projects/{id}/people/{alt_id}",type:"GET"},getCompanyPeople:{url:"companies/{id}/people",type:"GET"},getPerson:{url:"people/{id}",type:"GET"},getAPIKeys:{url:"people/APIKeys",
type:"GET"},createMyStatus:{url:"me/status",type:"POST"},createStatus:{url:"people/{id}/status",type:"POST"},updateMyStatus:{url:"me/status/{id}",type:"PUT"},updateStatus:{url:"people/status/{id}",type:"PUT"},deleteMyStatus:{url:"me/status/{id}",type:"DELETE"},deleteStatus:{url:"people/status/{id}",type:"DELETE"},getMyStatus:{url:"me/status",type:"GET"},getStatus:{url:"people/{id}/statuses",type:"GET"},getEveryonesStatus:{url:"people/status",type:"GET"},addProjectUser:{url:"projects/{id}/people/{id}",
type:"POST"},removeProjectUser:{url:"projects/{id}/people/{id}",type:"DELETE"},getUserProjectPermissions:{url:"projects/{id}/people/{id}",type:"GET"},updateUserProjectPermissions:{url:"projects/{id}/people/{id}",type:"PUT"},createProject:{url:"projects",type:"POST"},updateProject:{url:"projects/{id}",type:"PUT"},deleteProject:{url:"projects/{id}",type:"DELETE"},getAllProjects:{url:"projects",type:"GET"},getProject:{url:"projects/{id}",type:"GET"},getStarredProjects:{url:"projects/starred",type:"GET"},
starProject:{url:"projects/{id}/star",type:"PUT"},unstarProject:{url:"projects/{id}/unstar",type:"PUT"},getAllLinks:{url:"links",type:"GET"},getProjectLinks:{url:"projects/{id}/links",type:"GET"},getLink:{url:"links/{id}",type:"GET"},createLink:{url:"projects/{id}/links",type:"POST"},updateLink:{url:"links/{id}",type:"PUT"},deleteLink:{url:"links/{id}",type:"DELETE"},getAllTime:{url:"time_entries",type:"GET"},getAllProjectTime:{url:"projects/{id}/time_entries",type:"GET"},getTaskTime:{url:"todo_items/{id}/time_entries",
type:"GET"},createTime:{url:"projects/{id}/time_entries",type:"POST"},createTaskTime:{url:"todo_items/{id}/time_entries",type:"POST"},getTime:{url:"time_entries/{id}",type:"GET"},updateTime:{url:"time_entries/{id}",type:"PUT"},deleteTime:{url:"time_entries/{id}",type:"DELETE"},getAllTaskLists:{url:"projects/{id}/todo_lists",type:"GET"},getTaskList:{url:"todo_lists/{id}",type:"GET"},updateTaskList:{url:"todo_lists/{id}",type:"PUT"},createTaskList:{url:"projects/{id}/todo_lists",type:"POST"},deleteTaskList:{url:"todo_lists/{id}",
type:"DELETE"},reorderTaskLists:{url:"projects/{id}/todo_lists/reorder",type:"GET"},getAllTasks:{url:"todo_lists/{id}/tasks",type:"GET"},getTask:{url:"todo_items/{id}",type:"GET"},markTaskComplete:{url:"todo_items/{id}/complete",type:"PUT"},markTaskUncomplete:{url:"todo_items/{id}/uncomplete",type:"PUT"},addTask:{url:"todo_lists/{id}/todo_items",type:"POST"},editTask:{url:"todo_items/{id}",type:"PUT"},deleteTask:{url:"todo_items/{id}",type:"DELETE"},reorderTasks:{url:"todo_lists/{id}/todo_items/reorder",
type:"GET"},getEvents:{url:"events",type:"GET"}},c={info:function(a){"info"==f?Ti.API.info(a):"debug"==f&&Ti.API.debug(a)},debug:function(a){"info"==f?Ti.API.info(a):"debug"==f&&Ti.API.debug(a)},error:function(a){"info"==f?Ti.API.info(a):"debug"==f&&Ti.API.error(a)}},g=function(a){if(Ti.App.Properties.hasProperty("auth")){var b=encodeURI("http://appcelerator.teamworkpm.net/"+a.url+h),d=a.body||null,f=a.type?a.type:"GET",e=a.onload||null,g=a.onerror||null,a=Ti.Network.createHTTPClient();c.debug("Teamwork Request: "+
b);a.onload=function(a){a.status=this.status;200==this.status||201==this.status?(c.debug("Teamwork Response: "+this.responseText),e&&e(JSON.parse(this.responseText))):204===this.status?(c.debug("Teamwork Response: NO CONTENT"),e&&e("No Available Content")):(c.debug("Teamwork Error: "+this.status+"("+a+")"),this.onerror(a))};a.onerror=function(a){c.debug("Teamwork Request Error: "+this.status);a.status=this.status;g&&g(a)};a.open(f,b);a.setRequestHeader("Authorization",Ti.App.Properties.getString("ti.teamwork.auth"));
a.send(d)}else c.error("TeamworkPM API Key Required.")};e.setAuth=function(a){a&&"clear"!=a&&a.apiKey&&(Ti.App.Properties.setString("ti.teamwork.auth","Basic "+Titanium.Utils.base64encode(a.apiKey+":password")),c.debug("Teamwork API Key Set"))};e.checkAuth=function(){return Ti.App.Properties.hasProperty("ti.teamwork.auth")?!0:!1};e.setLogLevel=function(a){a&&"debug"==a?f="debug":a&&"info"==a&&(f="info")};e.setResponseType=function(a){a&&"json"==a?h=".json":a&&"xml"==a?h=".xml":c.error("MODULE ti.teamwork responseType accepts 'json' or 'xml' only.")};
for(var j in d)i(j);return e}();module.exports=teamApi;